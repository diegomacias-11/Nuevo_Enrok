{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}ARAU{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="icon" type="image/png" href="{% static 'img/logo_nav.png' %}">
  {% block extra_head %}{% endblock %}
  
</head>
<body>
  {% include 'includes/header.html' %}

  <main>
    {% if messages %}
      <ul class="messages">
        {% for message in messages %}
          <li class="{{ message.tags }}">{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
    {% block content %}{% endblock %}
  </main>

  <div id="table-scroll-bottom" class="table-scroll-bottom" aria-hidden="true">
    <div class="table-scroll-inner"></div>
  </div>

  <script>
    (function () {
      var bottom = document.getElementById("table-scroll-bottom");
      var inner = bottom ? bottom.querySelector(".table-scroll-inner") : null;
      if (!bottom || !inner) {
        return;
      }
      var activeContainer = null;

      function updateWidth(container) {
        var table = container.querySelector("table");
        var width = table ? table.scrollWidth : container.scrollWidth;
        if (!width) {
          return;
        }
        inner.style.width = width + "px";
      }

      function setActive(container) {
        activeContainer = container;
        updateWidth(container);
        bottom.scrollLeft = container.scrollLeft;
      }

      function onContainerScroll(e) {
        if (activeContainer !== e.currentTarget) {
          return;
        }
        bottom.scrollLeft = activeContainer.scrollLeft;
      }

      function onBottomScroll() {
        if (!activeContainer) {
          return;
        }
        activeContainer.scrollLeft = bottom.scrollLeft;
      }

      var containers = Array.prototype.slice.call(
        document.querySelectorAll(".table-container, .kanban-board")
      );
      containers.forEach(function (c) {
        c.addEventListener("mouseenter", function () {
          setActive(c);
        });
        c.addEventListener("scroll", onContainerScroll);
      });
      bottom.addEventListener("scroll", onBottomScroll);
      if (containers[0]) {
        setActive(containers[0]);
      }
      window.addEventListener("resize", function () {
        if (activeContainer) {
          updateWidth(activeContainer);
        }
      });
    })();
  </script>
</body>
</html>
